<div class="edit-imprest-container">
    <app-sidebar [sidebarType]="'finance'"></app-sidebar>
    
    <div class="main-content">
      <app-header 
        title="Financial Services" 
        subtitle="Finance Services/Imprest Request"
        headerClass="finance"
        [showBackButton]="true">
      </app-header>
      
      <div class="edit-imprest-content">
        <div class="edit-imprest-section">
          <div class="section-header">
            <h2>NEW ACTIVITY REQUEST</h2>
          </div>
          
          <div class="section-body">
            <div class="form-layout">
              <div class="left-section">
                <!-- Project Details -->
                <div class="form-section">
                  <h3>Project Details</h3>
                  <div class="form-row">
                    <div class="form-group">
                      <div class="input-with-close">
                        <input type="text" [(ngModel)]="editRequest.employeeName" value="Nina Marley">
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="input-with-close">
                        <input type="text" [(ngModel)]="editRequest.employeeNumber" value="IMP_019">
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <div class="input-with-close">
                        <input type="text" [(ngModel)]="editRequest.mpesaNumber" value="0798354209">
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="input-with-close">
                        <input type="text" [(ngModel)]="editRequest.mpesaRegName" value="Nina Marley">
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Project Details -->
                <div class="form-section">
                  <h3>Project Details</h3>
                  <div class="form-row">
                    <div class="form-group">
                      <div class="select-with-close">
                        <select [(ngModel)]="editRequest.projectCode">
                          <option value="">Project Code</option>
                          <option value="PRJ001">PRJ001</option>
                          <option value="PRJ002">PRJ002</option>
                        </select>
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="select-with-close">
                        <select [(ngModel)]="editRequest.fundingSource">
                          <option value="">Funding Source</option>
                          <option value="Internal">Internal</option>
                          <option value="External">External</option>
                        </select>
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <div class="select-with-close">
                        <select [(ngModel)]="editRequest.programArea">
                          <option value="">Program Area</option>
                          <option value="Health">Health</option>
                          <option value="Education">Education</option>
                        </select>
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="select-with-close">
                        <select [(ngModel)]="editRequest.activity">
                          <option value="">Activity</option>
                          <option value="Training">Training</option>
                          <option value="Meeting">Meeting</option>
                        </select>
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <div class="select-with-close">
                        <select [(ngModel)]="editRequest.county">
                          <option value="">County</option>
                          <option value="Nairobi">Nairobi</option>
                          <option value="Mombasa">Mombasa</option>
                        </select>
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="select-with-close">
                        <select [(ngModel)]="editRequest.site">
                          <option value="">Site</option>
                          <option value="Site A">Site A</option>
                          <option value="Site B">Site B</option>
                        </select>
                        <button class="close-btn">✕</button>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Dates and Amount -->
                <div class="form-section">
                  <div class="form-row">
                    <div class="form-group">
                      <label>Start Date</label>
                      <input type="date" [(ngModel)]="editRequest.startDate">
                    </div>
                    <div class="form-group">
                      <label>End Date</label>
                      <input type="date" [(ngModel)]="editRequest.endDate">
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <label>Currency</label>
                      <input type="text" [(ngModel)]="editRequest.currency">
                    </div>
                    <div class="form-group">
                      <label>Amount</label>
                      <input type="number" [(ngModel)]="editRequest.amount">
                    </div>
                  </div>
                </div>
                
                <!-- Description -->
                <div class="form-section">
                  <div class="form-group">
                    <label>Edit Description</label>
                    <div class="textarea-with-icon">
                      <textarea [(ngModel)]="editRequest.description" rows="3"></textarea>
                      <i class="edit-icon">✏️</i>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="right-section">
                <!-- Supporting Files -->
                <div class="files-section">
                  <h3>Edit Supporting Files</h3>
                  
                  <!-- Uploaded Files -->
                  <div class="uploaded-files">
                    <div class="file-item" *ngFor="let file of supportingFiles">
                      <div class="file-icon" [class]="'file-' + file.type">
                        <img *ngIf="file.type === 'pdf'" src="assets/pdf.svg" alt="PDF" width="28" height="28" />
                        <img *ngIf="file.type === 'png'" src="assets/png.svg" alt="PNG" width="28" height="28" />
                        <img *ngIf="file.type === 'jpg'" src="assets/jpg.svg" alt="JPG" width="28" height="28" />
                      </div>
                      <div class="file-info">
                        <div class="file-name">{{ file.name }}</div>
                        <div class="file-size">{{ file.size }}</div>
                      </div>
                      <button class="delete-file-btn" (click)="removeFile(file)">
                        <img src="assets/delete.svg" alt="Delete" width="24" height="24" />
                      </button>
                    </div>
                    
                    <div class="edit-description">
                      <label>Edit Description</label>
                      <div class="textarea-with-icon">
                        <textarea placeholder="Lorem ipsum dolor sit amet consectetur. Amet sit pellentesque consequat nibh ut diam eget amet nec." rows="2"></textarea>
                        <i class="edit-icon">✏️</i>
                      </div>
                    </div>
                    
                    <div class="edit-description">
                      <label>Edit Description</label>
                      <div class="textarea-with-icon">
                        <textarea placeholder="Lorem ipsum dolor sit amet consectetur. Amet sit pellentesque consequat nibh ut diam eget amet nec." rows="2"></textarea>
                        <i class="edit-icon">✏️</i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="section-footer">
            <button class="btn btn-primary" (click)="submitEditRequest()">submit</button>
            <button class="btn btn-success" (click)="cancel()">Cancel</button>
          </div>
        </div>
      </div>
      
      <app-footer></app-footer>
    </div>
  </div>